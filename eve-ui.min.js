"use strict";var eveui_user_agent=eveui_user_agent||"For source website, see referrer. For library, see https://github.com/quiescens/eve-ui/ r:0.9.2",eveui_preload_initial=eveui_preload_initial||50,eveui_preload_interval=eveui_preload_interval||10,eveui_mode=eveui_mode||"multi_window",eveui_allow_edit=eveui_allow_edit||!1,eveui_fit_selector=eveui_fit_selector||'[href^="fitting:"],[data-dna]',eveui_item_selector=eveui_item_selector||'[href^="item:"],[data-itemid]',eveui_char_selector=eveui_char_selector||'[href^="char:"],[data-charid]',eveui_corp_selector=eveui_corp_selector||'[href^="corp:"],[data-corpid]',eveui_use_osmium=eveui_use_osmium||!1,eveui_urlify=eveui_urlify||(e=>"https://o.smium.org/loadout/dna/"+encodeURI(e)),eveui_imageserver=eveui_imageserver||(e=>e.startsWith("Character")?"https://imageserver.eveonline.com/"+encodeURI(e)+".jpg":"https://imageserver.eveonline.com/"+encodeURI(e)+".png"),eveui_style=eveui_style||"<style>.eveui_window{position:fixed;line-height:1;background:#eee;color:#000;border:1px solid;opacity:.95;display:flex;flex-direction:column}.eveui_modal_overlay{cursor:pointer;position:fixed;background:#000;top:0;left:0;right:0;bottom:0;z-index:10;opacity:.5}.eveui_title{width:100%;background:#ccc;cursor:move;white-space:nowrap;margin-right:2em}.eveui_scrollable{padding-right:17px;text-align:left;overflow:auto}.eveui_content{display:inline-block;margin:2px;max-width:40em}.eveui_content .eveui_title{display:flex}.eveui_content table{border-collapse:collapse}.eveui_content td{vertical-align:top;padding:0 2px}.eveui_content .eveui_edit{display:none}.eveui_content.eveui_edit .eveui_edit{display:inline-block}.eveui_edit .eveui_edit_icon{display:none}.eveui_itemselect{width:100%;position:absolute}.eveui_itemselect input{width:100%;min-width:20em;padding:0}.eveui_rowcontent{position:relative}.eveui_flexgrow{flex-grow:1}.eveui_fit_header{align-items:center}.eveui_fit_stats{background:#eee;white-space:nowrap;position:absolute;margin-left:19px;border:1px solid;padding:2px;line-height:1;font-size:90%}.eveui_line_spacer{line-height:.5em}.eveui_right{text-align:right}.eveui_icon{display:inline-block;margin:1px;vertical-align:middle;height:1em;width:1em;background-position:center;background-repeat:no-repeat;background-size:contain}.eveui_item_icon{height:20px;width:20px}.eveui_ship_icon{height:32px;width:32px}.eveui_close_icon{cursor:pointer;position:absolute;top:0;right:0;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0uOTMgMi4zNDNMMi4zNDIuOTI5IDE1LjA3IDEzLjY1NmwtMS40MTQgMS40MTR6Ii8+PHBhdGggZD0iTTIuMzQzIDE1LjA3TC45MjkgMTMuNjU4IDEzLjY1Ni45M2wxLjQxNCAxLjQxNHoiLz48L3N2Zz4=)}.eveui_info_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI4OTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0OCAzODRjMzUgMCA2NC0yOSA2NC02NHMtMjktNjQtNjQtNjQtNjQgMjktNjQgNjQgMjkgNjQgNjQgNjR6bTAtMzIwQzIwMSA2NCAwIDI2NSAwIDUxMnMyMDEgNDQ4IDQ0OCA0NDggNDQ4LTIwMSA0NDgtNDQ4UzY5NSA2NCA0NDggNjR6bTAgNzY4Yy0xNzcgMC0zMjAtMTQzLTMyMC0zMjBzMTQzLTMyMCAzMjAtMzIwIDMyMCAxNDMgMzIwIDMyMC0xNDMgMzIwLTMyMCAzMjB6bTY0LTMyMGMwLTMyLTMyLTY0LTY0LTY0aC02NGMtMzIgMC02NCAzMi02NCA2NGg2NHYxOTJjMCAzMiAzMiA2NCA2NCA2NGg2NGMzMiAwIDY0LTMyIDY0LTY0aC02NFY1MTJ6Ii8+PC9zdmc+)}.eveui_plus_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTM4NCA0NDhWMTkySDI1NnYyNTZIMHYxMjhoMjU2djI1NmgxMjhWNTc2aDI1NlY0NDhIMzg0eiIgLz4KPC9zdmc+Cg==)}.eveui_minus_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTAgNDQ4djEyOGg1MTJWNDQ4SDB6IiAvPgo8L3N2Zz4K)}.eveui_more_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI3NjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTAgNTc2aDEyOHYtMTI4aC0xMjh2MTI4eiBtMC0yNTZoMTI4di0xMjhoLTEyOHYxMjh6IG0wIDUxMmgxMjh2LTEyOGgtMTI4djEyOHogbTI1Ni0yNTZoNTEydi0xMjhoLTUxMnYxMjh6IG0wLTI1Nmg1MTJ2LTEyOGgtNTEydjEyOHogbTAgNTEyaDUxMnYtMTI4aC01MTJ2MTI4eiIgLz4KPC9zdmc+Cg==)}.eveui_edit_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI4OTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTcwNCA2NEw1NzYgMTkybDE5MiAxOTIgMTI4LTEyOEw3MDQgNjR6TTAgNzY4bDAuNjg4IDE5Mi41NjJMMTkyIDk2MGw1MTItNTEyTDUxMiAyNTYgMCA3Njh6TTE5MiA4OTZINjRWNzY4aDY0djY0aDY0Vjg5NnoiIC8+Cjwvc3ZnPgo=)}.eveui_copy_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI4OTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTcwNCA4OTZoLTY0MHYtNTc2aDY0MHYxOTJoNjR2LTMyMGMwLTM1LTI5LTY0LTY0LTY0aC0xOTJjMC03MS01Ny0xMjgtMTI4LTEyOHMtMTI4IDU3LTEyOCAxMjhoLTE5MmMtMzUgMC02NCAyOS02NCA2NHY3MDRjMCAzNSAyOSA2NCA2NCA2NGg2NDBjMzUgMCA2NC0yOSA2NC02NHYtMTI4aC02NHYxMjh6IG0tNTEyLTcwNGMyOSAwIDI5IDAgNjQgMHM2NC0yOSA2NC02NCAyOS02NCA2NC02NCA2NCAyOSA2NCA2NCAzMiA2NCA2NCA2NCAzMyAwIDY0IDAgNjQgMjkgNjQgNjRoLTUxMmMwLTM5IDI4LTY0IDY0LTY0eiBtLTY0IDUxMmgxMjh2LTY0aC0xMjh2NjR6IG00NDgtMTI4di0xMjhsLTI1NiAxOTIgMjU2IDE5MnYtMTI4aDMyMHYtMTI4aC0zMjB6IG0tNDQ4IDI1NmgxOTJ2LTY0aC0xOTJ2NjR6IG0zMjAtNDQ4aC0zMjB2NjRoMzIwdi02NHogbS0xOTIgMTI4aC0xMjh2NjRoMTI4di02NHoiIC8+Cjwvc3ZnPgo=)}.copy_only{position:absolute;display:inline-block;line-height:0;font-size:0}.nocopy::after{content:attr(data-content)}.whitespace_nowrap{white-space:nowrap}.float_left{float:left}.float_right{float:right}.eveui_indent{margin-left:.5em;display:inline-block}</style>",eveui;!function(e){function t(){y.ajax(`https://esi.tech.ccp.is/v1/status/`,{dataType:"json",cache:!0}).done(t=>{if(A=t.server_version,indexedDB){let t=indexedDB.open("eveui",A);t.onupgradeneeded=(e=>{let i=t.result;i.objectStoreNames.contains("cache")&&i.deleteObjectStore("cache"),i.createObjectStore("cache",{keyPath:"path"})}),t.onsuccess=(()=>{(C=t.result).transaction("cache","readonly").objectStore("cache").getAll().onsuccess=(t=>{y.each(t.target.result,(t,i)=>{e.cache[i.path]=i}),y(document).ready(()=>{v()}),f=setTimeout(p,eveui_preload_interval)})})}else y(document).ready(()=>{v()}),f=setTimeout(p,eveui_preload_interval);setInterval(h,100)}).fail(e=>{setTimeout(t,1e4)})}function i(e="&nbsp;"){let t=y(`<span class="eveui_window"><div class="eveui_title">${e}</div><span class="eveui_icon eveui_close_icon" /><span class="eveui_scrollable"><span class="eveui_content">Loading...</span></span></span>`);return"modal"===eveui_mode&&0===y(".eveui_modal_overlay").length&&(y("body").append(`<div class="eveui_modal_overlay" />`),t.attr("data-eveui-modal",1)),t.css("z-index",x++),t.css("left",M+10),t.css("top",N-10),t}function n(t,i){function n(t,i){let n="",a=0;for(let o in t){let s=e.cache["/v3/universe/types/"+o];a+=t[o],n+=i?`<tr class="copy_only"><td>${(s.name+"<br />").repeat(t[o])}`:`<tr class="copy_only"><td>${s.name} x${t[o]}<br />`,n+=`<tr class="nocopy" data-eveui-itemid="${o}"><td><img src="${eveui_imageserver("Type/"+o+"_32")}" class="eveui_icon eveui_item_icon" /><td class="eveui_right">${t[o]}<td colspan="2"><div class="eveui_rowcontent">${s.name}</div><td class="eveui_right whitespace_nowrap"><span data-itemid="${o}" class="eveui_icon eveui_info_icon" /><span class="eveui_icon eveui_plus_icon eveui_edit" /><span class="eveui_icon eveui_minus_icon eveui_edit" /><span class="eveui_icon eveui_more_icon eveui_edit" />`}return void 0!==i&&(i>a&&(n+=`<tr class="nocopy"><td class="eveui_icon eveui_item_icon" /><td class="eveui_right whitespace_nowrap">${i-a}<td colspan="2"><div class="eveui_rowcontent">Empty</div><td class="eveui_right"><span class="eveui_icon eveui_more_icon eveui_edit" />`),a>i&&(n+=`<tr class="nocopy"><td class="eveui_icon eveui_item_icon" /><td class="eveui_right">${i-a}<td><div class="eveui_rowcontent">Excess</div>`)),n}let a={},o={},s={},c={},r={},d={},u=t.split(":"),l=parseInt(u.shift()),v=e.cache["/v3/universe/types/"+l];v.hiSlots=0,v.medSlots=0,v.lowSlots=0;for(let t in v.dogma_attributes){let i=e.cache["/v3/universe/types/"+l].dogma_attributes[t];switch(i.attribute_id){case 14:v.hiSlots=i.value;break;case 13:v.medSlots=i.value;break;case 12:v.lowSlots=i.value;break;case 1137:v.rigSlots=i.value;break;case 1367:v.maxSubSystems=i.value}}e:for(let t in u){if(0===u[t].length)continue;let i=u[t].split(";"),n=i[0],l=parseInt(i[1]),h=e.cache["/v3/universe/types/"+n];for(let e in h.dogma_attributes){let t=h.dogma_attributes[e];switch(t.attribute_id){case 1374:v.hiSlots+=t.value;break;case 1375:v.medSlots+=t.value;break;case 1376:v.lowSlots+=t.value}}for(let e in h.dogma_effects){let t=h.dogma_effects[e];switch(t.effect_id){case 12:a[n]=l;continue e;case 13:o[n]=l;continue e;case 11:s[n]=l;continue e;case 2663:c[n]=l;continue e;case 3772:r[n]=l;continue e}}d[n]=l}return`<span class="float_right"><eveui type="osmium" key="${t}" /></span><table class="eveui_fit_table"><thead><tr class="eveui_fit_header" data-eveui-itemid="${l}"><td colspan="2"><img src="${eveui_imageserver("Type/"+l+"_32")}" class="eveui_icon eveui_ship_icon" /><td><div class="eveui_rowcontent"><span class="eveui_startcopy" />[<a target="_blank" href="${eveui_urlify(t)}">${v.name}, ${i||v.name}</a>]<br/></div><td class="eveui_right whitespace_nowrap nocopy" colspan="2">${eveui_allow_edit?'<span class="eveui_icon eveui_edit_icon" />':""}<span class="eveui_icon eveui_copy_icon" /><span data-itemid="${l}" class="eveui_icon eveui_info_icon" /><span class="eveui_icon eveui_edit" /><span class="eveui_icon eveui_edit" /><span class="eveui_icon eveui_more_icon eveui_edit" /></thead><tbody class="whitespace_nowrap">${n(a,v.hiSlots)}<tr><td class="eveui_line_spacer">&nbsp;${n(o,v.medSlots)}<tr><td class="eveui_line_spacer">&nbsp;${n(s,v.lowSlots)}<tr><td class="eveui_line_spacer">&nbsp;${n(c,v.rigSlots)}<tr><td class="eveui_line_spacer">&nbsp;${n(r,v.maxSubSystems)}<tr><td class="eveui_line_spacer">&nbsp;${n(d)}</tbody></table><span class="eveui_endcopy" />`}function a(e,t){let a=i("Fit");return a.addClass("fit_window"),a.attr("data-eveui-dna",e),y("body").append(a),y(window).trigger("resize"),m(e).done(()=>{a.find(".eveui_content ").html(n(e,t)),y(window).trigger("resize")}).fail(()=>{a.remove()}),a}function o(t){let i=e.cache["/v3/universe/types/"+t],n=`<table class="whitespace_nowrap"><tr><td>${i.name}`;for(let e in i.dogma_attributes){let t=i.dogma_attributes[e];n+=`<tr><td><eveui key="/v1/dogma/attributes/${t.attribute_id}" path="display_name,name">attribute:${t.attribute_id}</eveui><td> ${t.value}`}return n+="</table>"}function s(e){let t=i("Item");return t.attr("data-eveui-itemid",e),t.addClass("item_window"),y("body").append(t),g("/v3/universe/types/"+e).done(()=>{t.find(".eveui_content").html(o(e)),y(window).trigger("resize")}).fail(()=>{t.remove()}),y(window).trigger("resize"),t}function c(t){let i=e.cache["/v4/characters/"+t];return`<table><tr><td colspan="2"><img class="float_left" src="${eveui_imageserver("Character/"+t+"_128")}" height="128" width="128" />${i.name}<hr /><img class="float_left" src="${eveui_imageserver("Corporation/"+i.corporation_id+"_64")}" height="64" width="64" />Member of <a href="corp:${i.corporation_id}"><eveui key="/v3/corporations/${i.corporation_id}" path="corporation_name">${i.corporation_id}</eveui></a><tr><td>Bio:<td>${i.description.replace(/<font[^>]+>/g,"<font>")}</table>`}function r(e){let t=i("Character");return t.attr("data-eveui-charid",e),t.addClass("char_window"),y("body").append(t),g("/v4/characters/"+e).done(()=>{t.find(".eveui_content").html(c(e)),y(window).trigger("resize")}).fail(()=>{t.remove()}),y(window).trigger("resize"),t}function d(t){let i=e.cache["/v3/corporations/"+t];return`<table><tr><td colspan="2"><img class="float_left" src="${eveui_imageserver("Corporation/"+t+"_128")}" height="128" width="128" />${i.corporation_name}<hr /><img class="float_left" src="${eveui_imageserver("Alliance/"+i.alliance_id+"_64")}" height="64" width="64" />Member of <eveui key="/v2/alliances/${i.alliance_id}" path="alliance_name">${i.alliance_id}</eveui><tr><td>Bio:<td>${i.corporation_description.replace(/<font[^>]+>/g,"<font>")}</table>`}function u(e){let t=i("Corporation");return t.attr("data-eveui-corpid",e),t.addClass("corp_window"),y("body").append(t),g("/v3/corporations/"+e).done(()=>{t.find(".eveui_content").html(d(e)),y(window).trigger("resize")}).fail(()=>{t.remove()}),y(window).trigger("resize"),t}function l(t){let i="",n=e.cache["osmium:"+t];return i=`<span class="eveui_fit_stats">Defense<br /><span class="eveui_indent">${Math.floor(n.ship.ehpAndResonances.ehp.avg)} EHP<table><tr><td><td>em<td>th<td>ki<td>ex<tr><td>s<td>${Math.round(100-100*n.ship.ehpAndResonances.shield.resonance.em)}<td>${Math.round(100-100*n.ship.ehpAndResonances.shield.resonance.thermal)}<td>${Math.round(100-100*n.ship.ehpAndResonances.shield.resonance.kinetic)}<td>${Math.round(100-100*n.ship.ehpAndResonances.shield.resonance.explosive)}<tr><td>a<td>${Math.round(100-100*n.ship.ehpAndResonances.armor.resonance.em)}<td>${Math.round(100-100*n.ship.ehpAndResonances.armor.resonance.thermal)}<td>${Math.round(100-100*n.ship.ehpAndResonances.armor.resonance.kinetic)}<td>${Math.round(100-100*n.ship.ehpAndResonances.armor.resonance.explosive)}<tr><td>h<td>${Math.round(100-100*n.ship.ehpAndResonances.hull.resonance.em)}<td>${Math.round(100-100*n.ship.ehpAndResonances.hull.resonance.thermal)}<td>${Math.round(100-100*n.ship.ehpAndResonances.hull.resonance.kinetic)}<td>${Math.round(100-100*n.ship.ehpAndResonances.hull.resonance.explosive)}</table></span><hr />Offense<br /><span class="eveui_indent">${Math.round(n.ship.damage.total.dps)} Total DPS<br />(${Math.round(n.ship.damage.drones.dps)} Drone DPS)<br /></span><hr />Capacitor<br /><span class="eveui_indent">&Delta;${(-1e3*n.ship.capacitor.delta).toFixed(2)}/s<br /></span></span>`}function v(){h();let e="[data-eveui-expand]";"expand_all"===eveui_mode&&(e="*"),y(eveui_fit_selector).filter(e).each(function(){let e=y(this);if(e.closest(".eveui_content").length>0)return;let t=e.attr("data-dna")||this.href.substring(this.href.indexOf(":")+1);m(t).done(function(){let i=y(this).text().trim(),a=y(`<span class="eveui_content eveui_fit">${n(t,i)}</span>`);a.attr("data-eveui-dna",t),e=e.replaceWith(a)})}),y(eveui_item_selector).filter(e).each(function(){let e=y(this);if(e.closest(".eveui_content").length>0)return;let t=e.attr("data-itemid")||this.href.substring(this.href.indexOf(":")+1);g("/v3/universe/types/"+t).done(()=>{e.replaceWith(`<span class="eveui_content eveui_item">${o(t)}</span>`)})}),y(eveui_char_selector).filter(e).each(function(){let e=y(this);if(e.closest(".eveui_content").length>0)return;let t=e.attr("data-charid")||this.href.substring(this.href.indexOf(":")+1);g("/v4/characters/"+t).done(()=>{e.replaceWith(`<span class="eveui_content eveui_char">${c(t)}</span>`)})})}function h(){y("eveui[type=osmium]").filter(":not([state])").each(function(){let e=y(this),t=e.attr("key");eveui_use_osmium&&(e.attr("state","loading"),g("osmium:"+t).done(()=>{e.html(l(t)),e.attr("state","done")}))}),y("eveui:not([type])").filter(":not([state])").each(function(){let t=y(this),i=t.attr("key");t.attr("state","loading"),g(i).done(()=>{let n=e.cache[i];y.each(t.attr("path").split(","),(e,i)=>{let a=_(n,i);if(a)return t.html(a),t.attr("state","done"),!1})})})}function p(){f=setTimeout(p,5e3),D>0||j>0&&y(eveui_fit_selector).not("[data-eveui-cached]").each(function(e){let t=y(this),i=m(t.data("dna")||this.href.substring(this.href.indexOf(":")+1));if("resolved"!==i.state())return j--,i.done(()=>{clearTimeout(f),f=setTimeout(p,eveui_preload_interval)}),!1;t.attr("data-eveui-cached",1)})}function _(e,t){let i=e;return y.each(t.split("."),(e,t)=>{i=i[t]}),i}function m(e){let t=[],i=e.split(":");for(let e in i){if(0===i[e].length)continue;let n=i[e].split(";"),a=n[0];t.push(g("/v3/universe/types/"+a))}return y.when.apply(null,t)}function g(t){let i,n=!1,a=t.startsWith("/v3/universe/types")||t.startsWith("/v1/dogma/attributes")||t.startsWith("osmium");if(t.startsWith("osmium:")){n=!0;let e=t.split(":",2)[1];i=`https://o.smium.org/api/json/loadout/dna/attributes/loc:ship,a:ehpAndResonances,a:damage,a:outgoing,a:capacitor,a:tank?input=${encodeURI(e)}`}else i="https://esi.tech.ccp.is"+t+"/";let o=n?"jsonp":"json";return"object"==typeof e.cache[t]?"function"==typeof e.cache[t].promise?e.cache[t]:y.Deferred().resolve():$>50?y.Deferred().reject():(D++,e.cache[t]=y.ajax(i,{dataType:o,cache:!a}).done(i=>{if(i.path=t,e.cache[t]=i,C&&a){let e=C.transaction("cache","readwrite"),t=e.objectStore("cache");t.put(i)}}).fail(i=>{i.status>=500&&setTimeout(()=>{delete e.cache[t]},1e4),$++,setTimeout(()=>{$--},6e4)}).always(()=>{D--}))}function w(e){y(".nocopy").hide(),y(".copyonly").show();let t=window.getSelection(),i=document.createRange();e.find(".eveui_startcopy").length?(i.setStart(e.find(".eveui_startcopy")[0],0),i.setEnd(e.find(".eveui_endcopy")[0],0)):i.selectNodeContents(e[0]),t.removeAllRanges(),t.addRange(i),document.execCommand("copy"),t.removeAllRanges(),y(".nocopy").show(),y(".copyonly").hide()}let f,y=jQuery,M=0,N=0,b=null,T=0,I=0,x=100,j=eveui_preload_initial;e.cache={};let A,C,D=0,z=0,$=0;y.ajaxSetup({data:{user_agent:eveui_user_agent}}),y("head").append(eveui_style),y(document).on("click",".eveui_window .eveui_close_icon",function(e){y(this).parent().remove(),0===y(".eveui_window").length&&y(".eveui_modal_overlay").remove()}),y(document).on("click",".eveui_modal_overlay",function(e){y(".eveui_window").remove(),y(this).remove()}),y(document).on("click",eveui_fit_selector,function(e){if(e.preventDefault(),j=eveui_preload_initial,this.eveui_window&&document.contains(this.eveui_window[0]))return void this.eveui_window.remove();let t=y(this).attr("data-dna")||this.href.substring(this.href.indexOf(":")+1),i=y(this).attr("data-title")||y(this).text().trim();switch(eveui_mode){case"expand":case"expand_all":y(this).attr("data-eveui-expand",1),v();break;default:this.eveui_window=a(t,i)}}),y(document).on("click",eveui_item_selector,function(e){if(e.preventDefault(),this.eveui_window&&document.contains(this.eveui_window[0]))return void this.eveui_window.remove();let t=y(this).attr("data-itemid")||this.href.substring(this.href.indexOf(":")+1);switch(eveui_mode){case"expand":case"expand_all":y(this).attr("data-eveui-expand",1),v();break;default:this.eveui_window=s(t)}}),y(document).on("click",eveui_char_selector,function(e){if(e.preventDefault(),this.eveui_window&&document.contains(this.eveui_window[0]))return void this.eveui_window.remove();let t=y(this).attr("data-charid")||this.href.substring(this.href.indexOf(":")+1);switch(eveui_mode){case"expand":case"expand_all":y(this).attr("data-eveui-expand",1),v();break;default:this.eveui_window=r(t)}}),y(document).on("click",eveui_corp_selector,function(e){if(e.preventDefault(),this.eveui_window&&document.contains(this.eveui_window[0]))return void this.eveui_window.remove();let t=y(this).attr("data-corpid")||this.href.substring(this.href.indexOf(":")+1);switch(eveui_mode){case"expand":case"expand_all":y(this).attr("data-eveui-expand",1),v();break;default:this.eveui_window=u(t)}}),y(document).on("click",".eveui_minus_icon",function(e){e.preventDefault();let t=y(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid"),i=y(this).closest("[data-eveui-dna]").attr("data-eveui-dna"),a=new RegExp(":"+t+";(\\d+)"),o=parseInt(i.match(a)[1])-1;i=o>0?i.replace(a,":"+t+";"+o):i.replace(a,""),y(this).closest("[data-eveui-dna]").attr("data-eveui-dna",i),m(i).done(()=>{y(`.eveui_window[data-eveui-dna="${i}"]`).find(".eveui_content ").html(n(i)),y(window).trigger("resize")})}),y(document).on("click",".eveui_plus_icon",function(e){e.preventDefault();let t=y(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid"),i=y(this).closest("[data-eveui-dna]").attr("data-eveui-dna"),a=new RegExp(`:${t};(\\d+)`),o=parseInt(i.match(a)[1])+1;i=o>0?i.replace(a,`:${t};${o}`):i.replace(a,""),y(this).closest("[data-eveui-dna]").attr("data-eveui-dna",i),m(i).done(()=>{y(`.eveui_window[data-eveui-dna="${i}"]`).find(".eveui_content ").html(n(i)),y(window).trigger("resize")})}),y(document).on("click",".eveui_edit_icon",function(e){e.preventDefault(),y(this).closest(".eveui_content").addClass("eveui_edit"),y(this).remove()}),y(document).on("click",".eveui_more_icon",function(t){t.preventDefault();let i=y(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid");if(this.eveui_itemselect&&document.contains(this.eveui_itemselect[0]))return void this.eveui_itemselect.remove();y(".eveui_itemselect").remove();let n=y(`<span class="eveui_itemselect"><input type="text" list="eveui_itemselect" placeholder="${y(this).closest("[data-eveui-itemid]").find(".eveui_rowcontent").text()}" /><datalist id="eveui_itemselect" /></span>`);if(n.css("z-index",x++),this.eveui_itemselect=n,y(this).closest("tr").find(".eveui_rowcontent").prepend(this.eveui_itemselect),n.find("input").focus(),void 0===i)return;let a=performance.now();g("/v3/universe/types/"+i).done(()=>{let t=e.cache["/v3/universe/types/"+i].market_group_id;g("/v1/markets/groups/"+t).done(()=>{if(!(a>z))return;z=a;let i=e.cache["/v1/markets/groups/"+t],n=y(".eveui_itemselect datalist");m(i.types.join(":")).done(()=>{i.types.sort((t,i)=>e.cache["/v3/universe/types/"+t].name.localeCompare(e.cache["/v3/universe/types/"+i].name));for(let t of i.types)n.append(`<option label="${e.cache["/v3/universe/types/"+t].name}">(${t})</option>`)})})})}),y(document).on("input",".eveui_itemselect input",function(e){let t=y(this).closest(".eveui_itemselect"),i=y(this).val();if("("===i.slice(0,1)&&")"===i.slice(-1)){i=i.slice(1,-1);let e=y(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid"),t=y(this).closest("[data-eveui-dna]").attr("data-eveui-dna");if(void 0===e)t=`${t.slice(0,-2)}:${i};1::`;else{let n=new RegExp(`^${e}:`);t=t.replace(n,`${i}:`),n=new RegExp(`:${e};`),t=t.replace(n,`:${i};`)}y(this).closest("[data-eveui-dna]").attr("data-eveui-dna",t),m(t).done(()=>{y(`.eveui_window[data-eveui-dna="${t}"]`).find(".eveui_content ").html(n(t)),y(window).trigger("resize")}),y(".eveui_itemselect").remove()}else{if(i.length<3)return;let e=performance.now();y.ajax({url:`https://esi.tech.ccp.is/v1/search/`,cache:!0,data:{search:y(this).val(),categories:"inventorytype"}}).done(i=>{if(void 0===i.inventorytype)return;let n={ids:i.inventorytype.slice(0,50)};y.ajax({url:`https://esi.tech.ccp.is/v1/universe/names/`,cache:!0,method:"POST",contentType:"application/json",data:JSON.stringify(n)}).done(i=>{if(!(e>z))return;z=e;let n=t.find("datalist");i.sort((e,t)=>e.name.localeCompare(t.name)),n.empty();for(let e in i)n.append(`<option label="${i[e].name}">(${i[e].id})</option>`)})})}}),y(document).on("click",e=>{y(e.target).closest(".eveui_itemselect,.eveui_more_icon").length>0||y(".eveui_itemselect").remove()}),y(document).on("click",".eveui_copy_icon",function(e){w(y(this).closest(".eveui_content"))}),y(document).on("mousedown",".eveui_window",function(e){y(this).css("z-index",x++)}),y(document).on("mousedown",".eveui_title",function(e){e.preventDefault(),b=y(this).parent(),T=M-b.position().left,I=N-b.position().top,b.css("z-index",x++)}),y(document).on("mousemove",e=>{M=e.clientX,N=e.clientY,null!==b&&(b.css("left",M-T),b.css("top",N-I))}),y(document).on("mouseup",e=>{b=null}),y(window).on("resize",function(e){if(y(".eveui_window").each(function(){let e=y(this),t=e.find(".eveui_content");t.height()>window.innerHeight-50?e.css("height",window.innerHeight-50):e.css("height",""),t.width()>window.innerWidth-40?e.css("width",window.innerWidth-40):e.css("width",""),e[0].getBoundingClientRect().bottom>window.innerHeight&&e.css("top",window.innerHeight-e.height()-25),e[0].getBoundingClientRect().right>window.innerWidth&&e.css("left",window.innerWidth-e.width()-10)}),"modal"===eveui_mode){let e=y("[data-eveui-modal]");e.css("top",window.innerHeight/2-e.height()/2),e.css("left",window.innerWidth/2-e.width()/2)}}),t(),e.format_fit=n,e.fit_window=a,e.format_item=o,e.item_window=s,e.format_char=c,e.char_window=r,e.format_corp=d,e.corp_window=u,e.format_fitstats=l,e.expand=v}(eveui||(eveui={}));