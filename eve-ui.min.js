"use strict";var eveui_accept_language,eveui,eveui_user_agent=eveui_user_agent||"For source website, see referrer. For library, see https://github.com/quiescens/eve-ui/ r:626ca17",eveui_preload_initial=eveui_preload_initial||50,eveui_preload_interval=eveui_preload_interval||10,eveui_mode=eveui_mode||"multi_window",eveui_allow_edit=eveui_allow_edit||!1,eveui_show_fitstats=eveui_show_fitstats||!1,eveui_fit_selector=eveui_fit_selector||'[href^="fitting:"],[data-dna]',eveui_item_selector=eveui_item_selector||'[href^="item:"],[data-itemid]',eveui_char_selector=eveui_char_selector||'[href^="char:"],[data-charid]',eveui_corp_selector=eveui_corp_selector||'[href^="corp:"],[data-corpid]',eveui_esi_endpoint=eveui_esi_endpoint||function(e){return"https://esi.evetech.net"+e},eveui_urlify=eveui_urlify||function(e){return"fitting:"+encodeURI(e)},eveui_imageserver=eveui_imageserver||function(e){return e.startsWith("Character")?"https://imageserver.eveonline.com/"+encodeURI(e)+".jpg":"https://imageserver.eveonline.com/"+encodeURI(e)+".png"},eveui_style=eveui_style||"<style>.eveui_window{position:fixed;line-height:1;background:#eee;color:#000;border:1px solid;opacity:.95;display:flex;flex-direction:column}.eveui_modal_overlay{cursor:pointer;position:fixed;background:#000;top:0;left:0;right:0;bottom:0;z-index:10;opacity:.5}.eveui_title{width:100%;background:#ccc;cursor:move;white-space:nowrap;margin-right:2em}.eveui_scrollable{padding-right:17px;text-align:left;overflow:auto}.eveui_content{display:inline-block;margin:2px;max-width:40em}.eveui_content .eveui_title{display:flex}.eveui_content table{border-collapse:collapse}.eveui_content td{vertical-align:top;padding:0 2px}.eveui_content .eveui_edit{display:none}.eveui_content.eveui_edit .eveui_edit{display:inline-block}.eveui_edit .eveui_edit_icon{display:none}.eveui_itemselect{width:100%;position:absolute}.eveui_itemselect input{width:100%;min-width:20em;padding:0}.eveui_rowcontent{position:relative}.eveui_flexgrow{flex-grow:1}.eveui_fit_header{align-items:center}.eveui_fit_stats{background:#eee;white-space:nowrap;position:absolute;margin-left:19px;border:1px solid;padding:2px;line-height:1;font-size:90%}.eveui_line_spacer{line-height:.5em}.eveui_right{text-align:right}.eveui_icon{display:inline-block;margin:1px;vertical-align:middle;height:1em;width:1em;background-position:center;background-repeat:no-repeat;background-size:contain}.eveui_item_icon{height:20px;width:20px}.eveui_ship_icon{height:32px;width:32px}.eveui_close_icon{cursor:pointer;position:absolute;top:0;right:0;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0uOTMgMi4zNDNMMi4zNDIuOTI5IDE1LjA3IDEzLjY1NmwtMS40MTQgMS40MTR6Ii8+PHBhdGggZD0iTTIuMzQzIDE1LjA3TC45MjkgMTMuNjU4IDEzLjY1Ni45M2wxLjQxNCAxLjQxNHoiLz48L3N2Zz4=)}.eveui_info_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI4OTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0OCAzODRjMzUgMCA2NC0yOSA2NC02NHMtMjktNjQtNjQtNjQtNjQgMjktNjQgNjQgMjkgNjQgNjQgNjR6bTAtMzIwQzIwMSA2NCAwIDI2NSAwIDUxMnMyMDEgNDQ4IDQ0OCA0NDggNDQ4LTIwMSA0NDgtNDQ4UzY5NSA2NCA0NDggNjR6bTAgNzY4Yy0xNzcgMC0zMjAtMTQzLTMyMC0zMjBzMTQzLTMyMCAzMjAtMzIwIDMyMCAxNDMgMzIwIDMyMC0xNDMgMzIwLTMyMCAzMjB6bTY0LTMyMGMwLTMyLTMyLTY0LTY0LTY0aC02NGMtMzIgMC02NCAzMi02NCA2NGg2NHYxOTJjMCAzMiAzMiA2NCA2NCA2NGg2NGMzMiAwIDY0LTMyIDY0LTY0aC02NFY1MTJ6Ii8+PC9zdmc+)}.eveui_plus_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTM4NCA0NDhWMTkySDI1NnYyNTZIMHYxMjhoMjU2djI1NmgxMjhWNTc2aDI1NlY0NDhIMzg0eiIgLz4KPC9zdmc+Cg==)}.eveui_minus_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTAgNDQ4djEyOGg1MTJWNDQ4SDB6IiAvPgo8L3N2Zz4K)}.eveui_more_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI3NjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTAgNTc2aDEyOHYtMTI4aC0xMjh2MTI4eiBtMC0yNTZoMTI4di0xMjhoLTEyOHYxMjh6IG0wIDUxMmgxMjh2LTEyOGgtMTI4djEyOHogbTI1Ni0yNTZoNTEydi0xMjhoLTUxMnYxMjh6IG0wLTI1Nmg1MTJ2LTEyOGgtNTEydjEyOHogbTAgNTEyaDUxMnYtMTI4aC01MTJ2MTI4eiIgLz4KPC9zdmc+Cg==)}.eveui_edit_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI4OTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTcwNCA2NEw1NzYgMTkybDE5MiAxOTIgMTI4LTEyOEw3MDQgNjR6TTAgNzY4bDAuNjg4IDE5Mi41NjJMMTkyIDk2MGw1MTItNTEyTDUxMiAyNTYgMCA3Njh6TTE5MiA4OTZINjRWNzY4aDY0djY0aDY0Vjg5NnoiIC8+Cjwvc3ZnPgo=)}.eveui_copy_icon{cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMjQiIHdpZHRoPSI4OTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTcwNCA4OTZoLTY0MHYtNTc2aDY0MHYxOTJoNjR2LTMyMGMwLTM1LTI5LTY0LTY0LTY0aC0xOTJjMC03MS01Ny0xMjgtMTI4LTEyOHMtMTI4IDU3LTEyOCAxMjhoLTE5MmMtMzUgMC02NCAyOS02NCA2NHY3MDRjMCAzNSAyOSA2NCA2NCA2NGg2NDBjMzUgMCA2NC0yOSA2NC02NHYtMTI4aC02NHYxMjh6IG0tNTEyLTcwNGMyOSAwIDI5IDAgNjQgMHM2NC0yOSA2NC02NCAyOS02NCA2NC02NCA2NCAyOSA2NCA2NCAzMiA2NCA2NCA2NCAzMyAwIDY0IDAgNjQgMjkgNjQgNjRoLTUxMmMwLTM5IDI4LTY0IDY0LTY0eiBtLTY0IDUxMmgxMjh2LTY0aC0xMjh2NjR6IG00NDgtMTI4di0xMjhsLTI1NiAxOTIgMjU2IDE5MnYtMTI4aDMyMHYtMTI4aC0zMjB6IG0tNDQ4IDI1NmgxOTJ2LTY0aC0xOTJ2NjR6IG0zMjAtNDQ4aC0zMjB2NjRoMzIwdi02NHogbS0xOTIgMTI4aC0xMjh2NjRoMTI4di02NHoiIC8+Cjwvc3ZnPgo=)}.copy_only{position:absolute;display:inline-block;line-height:0;font-size:0}.nocopy::after{content:attr(data-content)}.whitespace_nowrap{white-space:nowrap}.float_left{float:left}.float_right{float:right}.eveui_indent{margin-left:.5em;display:inline-block}</style>";!function(a){o("script start");let s=jQuery,i=0,d=0,t=null,l=0,v=0,_=100,p,h=eveui_preload_initial;a.cache={};let g,f=0,m=0,w=0,y=[1,.8691,.5706,.283,.106,.03],N;function b(){o("expanding fits"),n(),u("/v1/markets/prices"),p=setTimeout($,eveui_preload_interval),o("preload timer set")}function T(e="&nbsp;"){let t=s(`<span class="eveui_window">
<div class="eveui_title">${e}</div>
<span class="eveui_icon eveui_close_icon" />
<span class="eveui_scrollable">
<span class="eveui_content">
Loading...
</span>
</span>
</span>
`);return"modal"===eveui_mode&&0===s(".eveui_modal_overlay").length&&(s("body").append('<div class="eveui_modal_overlay" />'),t.attr("data-eveui-modal",1)),t.css("z-index",_++),t.css("left",i+10),t.css("top",d-10),t}function o(e){console.log("eveui: "+performance.now().toFixed(3)+" "+e)}function r(e,d){let l={},v={},_={},p={},h={},g={},f={},t=e.split(":");var m,i=parseInt(t.shift());let n=M("/v3/universe/types/"+i);for(m in n.hiSlots=0,n.medSlots=0,n.lowSlots=0,n.dogma_attributes){var a=M("/v3/universe/types/"+i).dogma_attributes[m];switch(a.attribute_id){case 14:n.hiSlots=a.value;break;case 13:n.medSlots=a.value;break;case 12:n.lowSlots=a.value;break;case 1137:n.rigSlots=a.value;break;case 1367:n.maxSubSystems=a.value}}e:for(var o in t)if(0!==t[o].length){o=t[o].split(";");let e=o[0];var s=parseInt(o[1]);if(e.endsWith("_"))e=e.slice(0,-1),f[e]=s;else{var w,y,r=M("/v3/universe/types/"+e);for(w in r.dogma_attributes){var c=r.dogma_attributes[w];switch(c.attribute_id){case 1272:g[e]=s;continue e;case 1374:n.hiSlots+=c.value;break;case 1375:n.medSlots+=c.value;break;case 1376:n.lowSlots+=c.value}}for(y in r.dogma_effects)switch(r.dogma_effects[y].effect_id){case 12:l[e]=s;continue e;case 13:v[e]=s;continue e;case 11:_[e]=s;continue e;case 2663:p[e]=s;continue e;case 3772:h[e]=s;continue e}f[e]=s}}function u(e,t){let i="",n=0;for(var a in e){var o=M("/v3/universe/types/"+a);n+=e[a],i=(i+=t?`<tr class="copy_only">
<td>
${(o.name+"<br />").repeat(e[a])}
`:`<tr class="copy_only">
<td>
${o.name} x${e[a]}<br />
`)+`<tr class="nocopy" data-eveui-itemid="${a}">
<td><img src="${eveui_imageserver("Type/"+a+"_32")}" class="eveui_icon eveui_item_icon" />
<td class="eveui_right">${e[a]}
<td colspan="2"><div class="eveui_rowcontent">${o.name}</div>
<td class="eveui_right whitespace_nowrap">
<span data-itemid="${a}" class="eveui_icon eveui_info_icon" />
<span class="eveui_icon eveui_plus_icon eveui_edit" />
<span class="eveui_icon eveui_minus_icon eveui_edit" />
<span class="eveui_icon eveui_more_icon eveui_edit" />
`}return void 0!==t&&(t>n&&(i+=`<tr class="nocopy">
<td class="eveui_icon eveui_item_icon" />
<td class="eveui_right whitespace_nowrap">${t-n}
<td colspan="2"><div class="eveui_rowcontent">Empty</div>
<td class="eveui_right"><span class="eveui_icon eveui_more_icon eveui_edit" />
`),n>t&&(i+=`<tr class="nocopy">
<td class="eveui_icon eveui_item_icon" />
<td class="eveui_right">${t-n}
<td><div class="eveui_rowcontent">Excess</div>
`)),i}return`<span class="float_right">
<eveui type="fit_stats" key="${e}" />
</span>
<table class="eveui_fit_table">
<thead>
<tr class="eveui_fit_header" data-eveui-itemid="${i}">
<td colspan="2"><img src="${eveui_imageserver("Type/"+i+"_32")}" class="eveui_icon eveui_ship_icon" />
<td>
<div class="eveui_rowcontent">
<span class="eveui_startcopy" />
[<a target="_blank" href="${eveui_urlify(e)}">
${n.name}, ${d||n.name}
</a>]<br/>
</div>
<td class="eveui_right whitespace_nowrap nocopy" colspan="2">
${eveui_allow_edit?'<span class="eveui_icon eveui_edit_icon" />':""}
<span class="eveui_icon eveui_copy_icon" />
<span data-itemid="${i}" class="eveui_icon eveui_info_icon" />
<span class="eveui_icon eveui_edit" />
<span class="eveui_icon eveui_edit" />
<span class="eveui_icon eveui_more_icon eveui_edit" />
</thead>
<tbody class="whitespace_nowrap">
${u(l,n.hiSlots)}
<tr><td class="eveui_line_spacer">&nbsp;
${u(v,n.medSlots)}
<tr><td class="eveui_line_spacer">&nbsp;
${u(_,n.lowSlots)}
<tr><td class="eveui_line_spacer">&nbsp;
${u(p,n.rigSlots)}
<tr><td class="eveui_line_spacer">&nbsp;
${u(h,n.maxSubSystems)}
<tr><td class="eveui_line_spacer">&nbsp;
${u(g)}
<tr><td class="eveui_line_spacer">&nbsp;
${u(f)}
</tbody>
</table>
<span class="eveui_endcopy" />
`}function I(e,t){let i=T("Fit");return i.addClass("fit_window"),i.attr("data-eveui-dna",e),s("body").append(i),s(window).trigger("resize"),o("fit window created"),c(e).done(function(){i.find(".eveui_content ").html(r(e,t)),s(window).trigger("resize"),o("fit window populated")}).fail(function(){i.remove()}),i}function x(e){var t,i,n=M("/v3/universe/types/"+e);let a=`<img src="${eveui_imageserver("Type/"+e+"_64")}" class="float_right" />
${n.name}<br />
${n.description}<hr />
<table class="whitespace_nowrap">
`;for(i in a+=`<tr><td>Approx price<td>${H((t=e,s.grep(M("/v1/markets/prices"),function(e){return e.type_id==t})[0]).average_price)}
<tr><td>&nbsp;
`,n.dogma_attributes){var o=n.dogma_attributes[i];a+=`<tr>
<td><eveui key="/v1/dogma/attributes/${o.attribute_id}" path="display_name,name">attribute:${o.attribute_id}</eveui>
<td> ${o.value}
`}return a+="</table>"}function j(e){let t=T("Item");return t.attr("data-eveui-itemid",e),t.addClass("item_window"),s("body").append(t),o("item window created"),u("/v3/universe/types/"+e).done(function(){t.find(".eveui_content").html(x(e)),s(window).trigger("resize"),o("item window populated")}).fail(function(){t.remove()}),s(window).trigger("resize"),t}function C(e){let t=M("/latest/characters/"+e);return`<table>
<tr><td colspan="2">
<img class="float_left" src="${eveui_imageserver("Character/"+e+"_128")}" height="128" width="128" />
${t.name}
<hr />
<img class="float_left" src="${eveui_imageserver("Corporation/"+t.corporation_id+"_64")}" height="64" width="64" />
Member of <a href="corp:${t.corporation_id}"><eveui key="/latest/corporations/${t.corporation_id}" path="corporation_name">${t.corporation_id}</eveui></a>
<tr><td>Bio:<td>${t.description.replace(/<font[^>]+>/g,"<font>")}
</table>
`}function D(e){let t=T("Character");return t.attr("data-eveui-charid",e),t.addClass("char_window"),s("body").append(t),o("char window created"),u("/latest/characters/"+e).done(function(){t.find(".eveui_content").html(C(e)),s(window).trigger("resize"),o("char window populated")}).fail(function(){t.remove()}),s(window).trigger("resize"),t}function A(e){let t=M("/latest/corporations/"+e);return`<table>
<tr><td colspan="2">
<img class="float_left" src="${eveui_imageserver("Corporation/"+e+"_128")}" height="128" width="128" />
${t.name}
<hr />
<img class="float_left" src="${eveui_imageserver("Alliance/"+t.alliance_id+"_64")}" height="64" width="64" />
Member of <eveui key="/latest/alliances/${t.alliance_id}" path="alliance_name">${t.alliance_id}</eveui>
<tr><td>Bio:<td>${t.description.replace(/<font[^>]+>/g,"<font>")}
</table>
`}function z(e){let t=T("Corporation");return t.attr("data-eveui-corpid",e),t.addClass("corp_window"),s("body").append(t),o("corp window created"),u("/latest/corporations/"+e).done(function(){t.find(".eveui_content").html(A(e)),s(window).trigger("resize"),o("corp window populated")}).fail(function(){t.remove()}),s(window).trigger("resize"),t}function L(e){return`<span class="eveui_fit_stats">
Approx. total price: ${H(function(e){let i=e.split(":"),n=0;for(var a in i)if(0!==i[a].length){a=i[a].split(";");let t=a[0];a=parseInt(a[1])||1;n+=s.grep(M("/v1/markets/prices"),function(e){return e.type_id==t})[0].average_price*a}return n}(e))}<br />
Gun DPS: ${H(function(n){let r=0,c=n.replace(/:+$/,"").split(":");for(var u in c){var e,u=c[u].split(";"),t=u[0],u=parseInt(u[1])||1,i=M("/v3/universe/types/"+t);let s={};for(e in i.dogma_attributes)s[i.dogma_attributes[e].attribute_id]=i.dogma_attributes[e].value;t={53:"energy",55:"projectile",74:"hybrid"};if(i.group_id in t){let e=0,t=s[64],i=s[51]/1e3,n=[],a=[],o={};for(var d in o[s[604]]=1,o[s[605]]=1,c){var l,d=c[d].split(";"),p=d[0],v=parseInt(d[1])||1,_=M("/v3/universe/types/"+p);let t={};for(l in _.dogma_attributes)t[_.dogma_attributes[l].attribute_id]=_.dogma_attributes[l].value;if(_.group_id in o&&(d=0,(d=(d=(d=(d+=t[114])+t[116])+t[117])+t[118])>e&&(e=d)),204 in t)for(let e=0;e<v;e++)a.push(t[204]);if(302===_.group_id)if(64 in t)for(let e=0;e<v;e++)n.push(t[64])}for(var h in i=i*.9*.8,a.sort(function(e,t){return e-t}),a)i*=1-(1-a[h])*y[h];for(var g in t=(t=t*1.15*1.25)*1.1*1.375,n.sort(function(e,t){return t-e}),n)t*=1+(n[g]-1)*y[g];r+=e*t/i*u}}return r}(e))}<br />
Missile DPS: ?<br />
Drone DPS: ?<br />
</span>
`}function H(e){if(isNaN(e))return"n/a";let t="";return 1e9<e&&(t="B",e/=1e9),1e6<e&&(t="M",e/=1e6),1e3<e&&(t="K",e/=1e3),""+e.toFixed(2)+t}function n(){k();let e="expand_all"===eveui_mode?"*":"[data-eveui-expand]";s(eveui_fit_selector).filter(e).each(function(){let n=s(this);if(!(0<n.closest(".eveui_content").length)){let i=n.attr("data-dna")||this.href.substring(this.href.indexOf(":")+1);c(i).done(function(){var e=s(this).text().trim();let t=s(`<span class="eveui_content eveui_fit">${r(i,e)}</span>`);t.attr("data-eveui-dna",i),n=n.replaceWith(t),o("fit window expanded")})}}),s(eveui_item_selector).filter(e).each(function(){let t=s(this);if(!(0<t.closest(".eveui_content").length)){let e=t.attr("data-itemid")||this.href.substring(this.href.indexOf(":")+1);u("/v3/universe/types/"+e).done(function(){t.replaceWith(`<span class="eveui_content eveui_item">${x(e)}</span>`),o("item window expanded")})}}),s(eveui_char_selector).filter(e).each(function(){let t=s(this);if(!(0<t.closest(".eveui_content").length)){let e=t.attr("data-charid")||this.href.substring(this.href.indexOf(":")+1);u("/latest/characters/"+e).done(function(){t.replaceWith(`<span class="eveui_content eveui_char">${C(e)}</span>`),o("char window expanded")})}})}function k(){s("eveui[type=fit_stats]").filter(":not([state])").each(function(){let e=s(this),t=e.attr("key");eveui_show_fitstats&&u("/v1/markets/prices").done(function(){e.html(L(t))}),e.attr("state","done")}),s("eveui:not([type])").filter(":not([state])").each(function(){let n=s(this),e=n.attr("key");n.attr("state","loading"),u(e).done(function(){let i=M(e);s.each(n.attr("path").split(","),function(e,t){t=function(e,t){let i=e;return s.each(t.split("."),function(e,t){i=i[t]}),i}(i,t);if(t)return n.html(t),n.attr("state","done"),!1})})})}function $(){p=setTimeout($,5e3),0<f||0<h&&s(eveui_fit_selector).not("[data-eveui-cached]").each(function(e){let t=s(this);let i=c(t.data("dna")||this.href.substring(this.href.indexOf(":")+1));if("resolved"!==i.state())return h--,i.done(function(){clearTimeout(p),p=setTimeout($,eveui_preload_interval)}),!1;t.attr("data-eveui-cached",1)})}function S(e){var t={headers:{"Accept-Language":eveui_accept_language},data:{user_agent:eveui_user_agent}};return s.extend(!0,t,e),s.ajax(t)}function c(e){let t=[],i=e.split(":");for(var n in i)if(0!==i[n].length){let e=i[n].split(";")[0];e.endsWith("_")&&(e=e.slice(0,-1)),t.push(u("/v3/universe/types/"+e))}return s.when.apply(null,t)}function u(t){var e;let n=t.startsWith("/v3/universe/types")||t.startsWith("/v1/dogma/attributes");e=eveui_esi_endpoint(t+"/"),t=(eveui_accept_language||navigator.languages[0])+t;return"object"==typeof a.cache[t]?"function"==typeof a.cache[t].promise?a.cache[t]:s.Deferred().resolve():50<w?s.Deferred().reject():(f++,a.cache[t]=S({url:e,dataType:"json",cache:!n}).done(function(i){if(i.path=t,a.cache[t]=i,N&&n){let e=N.transaction("cache","readwrite"),t=e.objectStore("cache");t.put(i)}}).fail(function(e){500<=e.status&&setTimeout(function(){delete a.cache[t]},1e4),50==++w&&o("too many errors in last 60s"),setTimeout(function(){w--},6e4)}).always(function(){f--}))}function M(e){return e=(eveui_accept_language||navigator.languages[0])+e,a.cache[e]}s("head").append(eveui_style),s(document).on("click",".eveui_window .eveui_close_icon",function(e){s(this).parent().remove(),0===s(".eveui_window").length&&s(".eveui_modal_overlay").remove()}),s(document).on("click",".eveui_modal_overlay",function(e){s(".eveui_window").remove(),s(this).remove()}),s(document).on("click",eveui_fit_selector,function(e){if(e.preventDefault(),h=eveui_preload_initial,this.eveui_window&&document.contains(this.eveui_window[0]))this.eveui_window.remove();else{var t=s(this).attr("data-dna")||this.href.substring(this.href.indexOf(":")+1),i=s(this).attr("data-title")||s(this).text().trim();switch(eveui_mode){case"expand":case"expand_all":s(this).attr("data-eveui-expand",1),n();break;default:this.eveui_window=I(t,i)}}}),s(document).on("click",eveui_item_selector,function(e){if(e.preventDefault(),this.eveui_window&&document.contains(this.eveui_window[0]))this.eveui_window.remove();else{var t=s(this).attr("data-itemid")||this.href.substring(this.href.indexOf(":")+1);switch(eveui_mode){case"expand":case"expand_all":s(this).attr("data-eveui-expand",1),n();break;default:this.eveui_window=j(t)}}}),s(document).on("click",eveui_char_selector,function(e){if(e.preventDefault(),this.eveui_window&&document.contains(this.eveui_window[0]))this.eveui_window.remove();else{var t=s(this).attr("data-charid")||this.href.substring(this.href.indexOf(":")+1);switch(eveui_mode){case"expand":case"expand_all":s(this).attr("data-eveui-expand",1),n();break;default:this.eveui_window=D(t)}}}),s(document).on("click",eveui_corp_selector,function(e){if(e.preventDefault(),this.eveui_window&&document.contains(this.eveui_window[0]))this.eveui_window.remove();else{var t=s(this).attr("data-corpid")||this.href.substring(this.href.indexOf(":")+1);switch(eveui_mode){case"expand":case"expand_all":s(this).attr("data-eveui-expand",1),n();break;default:this.eveui_window=z(t)}}}),s(document).on("click",".eveui_minus_icon",function(e){e.preventDefault();e=s(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid");let t=s(this).closest("[data-eveui-dna]").attr("data-eveui-dna");var i=new RegExp(":"+e+";(\\d+)"),n=parseInt(t.match(i)[1])-1;t=0<n?t.replace(i,":"+e+";"+n):t.replace(i,""),s(this).closest("[data-eveui-dna]").attr("data-eveui-dna",t),c(t).done(function(){let e=s(`.eveui_window[data-eveui-dna="${t}"]`);e.find(".eveui_content ").html(r(t)),s(window).trigger("resize")})}),s(document).on("click",".eveui_plus_icon",function(e){e.preventDefault();e=s(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid");let t=s(this).closest("[data-eveui-dna]").attr("data-eveui-dna");var i=new RegExp(`:${e};(\\d+)`),n=parseInt(t.match(i)[1])+1;t=0<n?t.replace(i,`:${e};`+n):t.replace(i,""),s(this).closest("[data-eveui-dna]").attr("data-eveui-dna",t),c(t).done(function(){let e=s(`.eveui_window[data-eveui-dna="${t}"]`);e.find(".eveui_content ").html(r(t)),s(window).trigger("resize")})}),s(document).on("click",".eveui_edit_icon",function(e){e.preventDefault(),s(this).closest(".eveui_content").addClass("eveui_edit"),s(this).remove()}),s(document).on("click",".eveui_more_icon",function(e){e.preventDefault();let t=s(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid");if(this.eveui_itemselect&&document.contains(this.eveui_itemselect[0]))this.eveui_itemselect.remove();else{s(".eveui_itemselect").remove();let e=s(`<span class="eveui_itemselect">
<input type="text" list="eveui_itemselect" placeholder="${s(this).closest("[data-eveui-itemid]").find(".eveui_rowcontent").text()}" />
<datalist id="eveui_itemselect" />
</span>
`);if(e.css("z-index",_++),this.eveui_itemselect=e,s(this).closest("tr").find(".eveui_rowcontent").prepend(this.eveui_itemselect),e.find("input").focus(),void 0!==t){let n=performance.now();u("/v3/universe/types/"+t).done(function(){let e=M("/v3/universe/types/"+t).market_group_id;u("/v1/markets/groups/"+e).done(function(){if(n>m){m=n;let t=M("/v1/markets/groups/"+e),i=s(".eveui_itemselect datalist");c(t.types.join(":")).done(function(){o("marketgroup cached"),t.types.sort(function(e,t){return M("/v3/universe/types/"+e).name.localeCompare(M("/v3/universe/types/"+t).name)});for(var e of t.types)i.append(`<option label="${M("/v3/universe/types/"+e).name}">(${e})</option>
`)})}})})}}}),s(document).on("input",".eveui_itemselect input",function(e){let a=s(this).closest(".eveui_itemselect"),i=s(this).val();if("("===i.slice(0,1)&&")"===i.slice(-1)){i=i.slice(1,-1);var n,o=s(this).closest("[data-eveui-itemid]").attr("data-eveui-itemid");let t=s(this).closest("[data-eveui-dna]").attr("data-eveui-dna");t=void 0===o?`${t.slice(0,-2)}:${i};1::`:(n=new RegExp(`^${o}:`),t=t.replace(n,i+":"),n=new RegExp(`:${o};`),t.replace(n,`:${i};`)),s(this).closest("[data-eveui-dna]").attr("data-eveui-dna",t),c(t).done(function(){let e=s(`.eveui_window[data-eveui-dna="${t}"]`);e.find(".eveui_content ").html(r(t)),s(window).trigger("resize")}),s(".eveui_itemselect").remove()}else if(!(i.length<3)){let n=performance.now();S({url:eveui_esi_endpoint("/v1/search/"),cache:!0,data:{search:s(this).val(),categories:"inventorytype"}}).done(function(e){void 0!==e.inventorytype&&S({url:eveui_esi_endpoint("/v1/universe/names/"),cache:!0,method:"POST",contentType:"application/json",data:JSON.stringify({ids:e.inventorytype.slice(0,50)})}).done(function(t){if(n>m){m=n;let e=a.find("datalist");for(var i in t.sort(function(e,t){return e.name.localeCompare(t.name)}),e.empty(),t)e.append(`<option label="${t[i].name}">(${t[i].id})</option>
`)}})})}}),s(document).on("click",function(e){0<s(e.target).closest(".eveui_itemselect,.eveui_more_icon").length||s(".eveui_itemselect").remove()}),s(document).on("click",".eveui_copy_icon",function(e){{var i=s(this).closest(".eveui_content");s(".nocopy").hide(),s(".copyonly").show();let e=window.getSelection(),t=document.createRange();return i.find(".eveui_startcopy").length?(t.setStart(i.find(".eveui_startcopy")[0],0),t.setEnd(i.find(".eveui_endcopy")[0],0)):t.selectNodeContents(i[0]),e.removeAllRanges(),e.addRange(t),document.execCommand("copy"),e.removeAllRanges(),s(".nocopy").show(),void s(".copyonly").hide()}}),s(document).on("mousedown",".eveui_window",function(e){s(this).css("z-index",_++)}),s(document).on("mousedown",".eveui_title",function(e){e.preventDefault(),t=s(this).parent(),l=i-t.position().left,v=d-t.position().top,t.css("z-index",_++)}),s(document).on("mousemove",function(e){i=e.clientX,d=e.clientY,null!==t&&(t.css("left",i-l),t.css("top",d-v))}),s(document).on("mouseup",function(e){t=null}),s(window).on("resize",function(e){if(s(".eveui_window").each(function(){let e=s(this),t=e.find(".eveui_content");t.height()>window.innerHeight-50?e.css("height",window.innerHeight-50):e.css("height",""),t.width()>window.innerWidth-40?e.css("width",window.innerWidth-40):e.css("width",""),e[0].getBoundingClientRect().bottom>window.innerHeight&&e.css("top",window.innerHeight-e.height()-25),e[0].getBoundingClientRect().right>window.innerWidth&&e.css("left",window.innerWidth-e.width()-10)}),"modal"===eveui_mode){let e=s("[data-eveui-modal]");e.css("top",window.innerHeight/2-e.height()/2),e.css("left",window.innerWidth/2-e.width()/2)}}),o("event handlers set"),function t(){o("eve version request"),S({url:eveui_esi_endpoint("/v1/status/"),dataType:"json",cache:!0}).done(function(e){if(o("eve version response "+(g=e.server_version)),indexedDB){let i=indexedDB.open("eveui",g);i.onupgradeneeded=function(e){let t=i.result;t.objectStoreNames.contains("cache")&&t.deleteObjectStore("cache"),t.createObjectStore("cache",{keyPath:"path"})},i.onsuccess=function(){let e=(N=i.result).transaction("cache","readonly"),t=e.objectStore("cache");t.getAll().onsuccess=function(e){s.each(e.target.result,function(e,t){a.cache[t.path]=t}),s(document).ready(b)}}}else s(document).ready(b);setInterval(k,100)}).fail(function(e){o("eve version request failed"),setTimeout(t,1e4)})}(),a.format_fit=r,a.fit_window=I,a.format_item=x,a.item_window=j,a.format_char=C,a.char_window=D,a.format_corp=A,a.corp_window=z,a.format_fitstats=L,a.expand=n,o("script end")}(eveui=eveui||{});